os: osx
osx_image: xcode11.3
language: swift

addons:
  homebrew:
    packages:
    - swiftgen
    - swiftlint
    - nvm

xcode_project: Roadie.xcodeproj
xcode_scheme: iOS
xcode_destination: platform=iOS Simulator,OS=13.0,name=iPhone 11 Pro

jobs:
  include:
    # Define the release stage that runs semantic-release
    - stage: release
      # Advanced: optionally overwrite your default `script` step to skip the tests
      # script:
      #   - make
      deploy:
        provider: script
        skip_cleanup: true
        script:
          # Use nvm to install and use the Node LTS version (nvm is installed on all Travis images)
          - nvm install lts/*
          - npx semantic-release
        on:
          all_branches: true

after_success:
  - bash <(curl -s https://codecov.io/bash) -J 'iOS'

